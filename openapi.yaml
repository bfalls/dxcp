openapi: 3.0.3
info:
  title: DXCP API
  version: 1.0.0
  description: |
    DXCP Phase 3 API contract.

    Policy and guardrails (enforced):
    - Allowlisted service only.
    - Environment name must be configured and enabled for the delivery group.
    - One active deployment at a time per delivery group.
    - Idempotency-Key required for mutating operations.
    - Rate limits (default): 60 rpm read, 10 rpm mutate.
    - Daily quotas (default): 25 deployments, 10 rollbacks, 50 build registrations, 50 upload capability requests per client.
    - Strict input validation for version, size, and allowlisted artifacts.
    - Version must be registered before deploy.
    - Kill switch can disable all mutating operations (returns 503 MUTATIONS_DISABLED).

servers:
  - url: /v1

security:
  - bearerAuth: []

paths:
  /deployments:
    post:
      summary: Trigger deployment by intent
      operationId: createDeployment
      parameters:
        - $ref: '#/components/parameters/IdempotencyKey'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeploymentIntent'
      responses:
        '201':
          description: Deployment created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentRecord'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/ServiceNotAllowlisted'
        '409':
          $ref: '#/components/responses/DeploymentLocked'
        '429':
          $ref: '#/components/responses/RateLimited'
        '503':
          $ref: '#/components/responses/MutationsDisabled'
    get:
      summary: List deployments
      operationId: listDeployments
      parameters:
        - name: service
          in: query
          required: false
          schema:
            type: string
        - name: environment
          in: query
          required: false
          schema:
            type: string
        - name: state
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/DeploymentState'
      responses:
        '200':
          description: List of deployments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DeploymentRecord'
        '429':
          $ref: '#/components/responses/RateLimited'

  /deployments/validate:
    post:
      summary: Validate deployment intent and policy
      operationId: validateDeployment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeploymentIntent'
      responses:
        '200':
          description: Pre-flight validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentPreflight'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/ServiceNotAllowlisted'
        '409':
          $ref: '#/components/responses/DeploymentLocked'
        '429':
          $ref: '#/components/responses/RateLimited'
        '503':
          $ref: '#/components/responses/MutationsDisabled'

  /policy/summary:
    post:
      summary: Fetch policy summary for a service selection
      operationId: getPolicySummary
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PolicySummaryRequest'
      responses:
        '200':
          description: Policy summary
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PolicySummaryResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/ServiceNotAllowlisted'
        '429':
          $ref: '#/components/responses/RateLimited'

  /deployments/{deploymentId}:
    get:
      summary: Get deployment status
      operationId: getDeployment
      parameters:
        - $ref: '#/components/parameters/DeploymentId'
      responses:
        '200':
          description: Deployment record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentRecord'
        '404':
          $ref: '#/components/responses/NotFound'
        '429':
          $ref: '#/components/responses/RateLimited'

  /deployments/{deploymentId}/failures:
    get:
      summary: View normalized failures
      operationId: getDeploymentFailures
      parameters:
        - $ref: '#/components/parameters/DeploymentId'
      responses:
        '200':
          description: Normalized failures
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/NormalizedFailure'
        '404':
          $ref: '#/components/responses/NotFound'
        '429':
          $ref: '#/components/responses/RateLimited'

  /environments:
    get:
      summary: List environments
      operationId: listEnvironments
      responses:
        '200':
          description: List of environments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Environment'
        '429':
          $ref: '#/components/responses/RateLimited'

  /services/{service}/delivery-status:
    get:
      summary: Latest deployment status and current running version
      operationId: getServiceDeliveryStatus
      parameters:
        - name: service
          in: path
          required: true
          schema:
            type: string
        - name: environment
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Delivery status for a service
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceDeliveryStatus'
        '403':
          $ref: '#/components/responses/ServiceNotAllowlisted'
        '429':
          $ref: '#/components/responses/RateLimited'

  /services/{service}/running:
    get:
      summary: Current running state for a service
      operationId: getServiceRunning
      parameters:
        - name: service
          in: path
          required: true
          schema:
            type: string
        - name: environment
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Current running state for a service
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CurrentRunningState'
                nullable: true
        '403':
          $ref: '#/components/responses/ServiceNotAllowlisted'
        '429':
          $ref: '#/components/responses/RateLimited'

  /deployments/{deploymentId}/rollback:
    post:
      summary: Trigger rollback
      operationId: rollbackDeployment
      parameters:
        - $ref: '#/components/parameters/DeploymentId'
        - $ref: '#/components/parameters/IdempotencyKey'
      responses:
        '201':
          description: Rollback initiated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeploymentRecord'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/ServiceNotAllowlisted'
        '409':
          $ref: '#/components/responses/DeploymentLocked'
        '429':
          $ref: '#/components/responses/RateLimited'
        '503':
          $ref: '#/components/responses/MutationsDisabled'

  /builds/upload-capability:
    post:
      summary: Obtain upload capability
      operationId: createUploadCapability
      parameters:
        - $ref: '#/components/parameters/IdempotencyKey'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BuildUploadRequest'
      responses:
        '201':
          description: Upload capability
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuildUploadCapability'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '429':
          $ref: '#/components/responses/RateLimited'
        '503':
          $ref: '#/components/responses/MutationsDisabled'

  /builds:
    post:
      summary: Register a build/version
      operationId: registerBuild
      parameters:
        - $ref: '#/components/parameters/IdempotencyKey'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BuildRegistration'
      responses:
        '201':
          description: Build registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuildRegistration'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '429':
          $ref: '#/components/responses/RateLimited'
        '503':
          $ref: '#/components/responses/MutationsDisabled'

  /builds/register:
    post:
      summary: Register an existing artifact as a build/version
      operationId: registerExistingBuild
      parameters:
        - $ref: '#/components/parameters/IdempotencyKey'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BuildRegisterExistingRequest'
      responses:
        '201':
          description: Build registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BuildRegistration'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          $ref: '#/components/responses/Conflict'
        '429':
          $ref: '#/components/responses/RateLimited'
        '503':
          $ref: '#/components/responses/MutationsDisabled'

  /admin/system/rate-limits:
    get:
      summary: Get global system rate limits
      operationId: getAdminSystemRateLimits
      responses:
        '200':
          description: Current global rate-limit policy.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSystemRateLimits'
        '403':
          $ref: '#/components/responses/Forbidden'
        '429':
          $ref: '#/components/responses/RateLimited'
        '501':
          $ref: '#/components/responses/NotImplemented'
    put:
      summary: Update global system rate limits
      operationId: updateAdminSystemRateLimits
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminSystemRateLimitsUpdateRequest'
      responses:
        '200':
          description: Updated global rate-limit policy.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSystemRateLimits'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '429':
          $ref: '#/components/responses/RateLimited'
        '501':
          $ref: '#/components/responses/NotImplemented'

  /admin/system/ci-publishers:
    get:
      summary: Get CI publisher allowlist
      operationId: getAdminSystemCiPublishers
      responses:
        '200':
          description: Current CI publisher allowlist.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSystemCiPublishers'
        '403':
          $ref: '#/components/responses/Forbidden'
        '429':
          $ref: '#/components/responses/RateLimited'
        '501':
          $ref: '#/components/responses/NotImplemented'
    put:
      summary: Update CI publisher allowlist
      operationId: updateAdminSystemCiPublishers
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminSystemCiPublishersUpdateRequest'
      responses:
        '200':
          description: Updated CI publisher allowlist.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSystemCiPublishers'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '429':
          $ref: '#/components/responses/RateLimited'
        '501':
          $ref: '#/components/responses/NotImplemented'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    DeploymentId:
      name: deploymentId
      in: path
      required: true
      schema:
        type: string
    IdempotencyKey:
      name: Idempotency-Key
      in: header
      required: true
      schema:
        type: string
      description: Unique key required for mutating requests.

  schemas:
    DeploymentIntent:
      type: object
      required: [service, environment, version, changeSummary, recipeId]
      properties:
        service:
          type: string
          description: Must be allowlisted.
        environment:
          type: string
          description: Environment name identifier (for example sandbox, staging, prod).
        version:
          type: string
          pattern: '^[0-9]+\.[0-9]+\.[0-9]+(-[A-Za-z0-9.-]+)?$'
        changeSummary:
          type: string
          maxLength: 240
        recipeId:
          type: string
          description: Required recipe identifier.
    DeploymentRecord:
      type: object
      required:
        - id
        - service
        - environment
        - version
        - recipeId
        - recipeRevision
        - effectiveBehaviorSummary
        - state
        - deploymentKind
        - outcome
        - changeSummary
        - createdAt
        - updatedAt
        - deliveryGroupId
        - engine_type
      properties:
        id:
          type: string
        service:
          type: string
        environment:
          type: string
        version:
          type: string
        recipeId:
          type: string
        recipeRevision:
          type: integer
          description: Recipe revision used for this deployment (frozen at submit time).
          nullable: true
        effectiveBehaviorSummary:
          type: string
          description: Frozen user-facing recipe behavior summary used at deployment time.
          nullable: true
        state:
          $ref: '#/components/schemas/DeploymentState'
        deploymentKind:
          $ref: '#/components/schemas/DeploymentKind'
        outcome:
          allOf:
            - $ref: '#/components/schemas/DeploymentOutcome'
          nullable: true
        changeSummary:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        deliveryGroupId:
          type: string
        engine_type:
          $ref: '#/components/schemas/EngineType'
        engineExecutionId:
          type: string
          description: Admin-only engine execution identifier.
        engineExecutionUrl:
          type: string
          format: uri
          description: Admin-only engine execution link.
        rollbackOf:
          type: string
          description: Deployment id being rolled back, when applicable.
        failures:
          type: array
          items:
            $ref: '#/components/schemas/NormalizedFailure'
    DeploymentPreflight:
      type: object
      required:
        - service
        - environment
        - version
        - recipeId
        - deliveryGroupId
        - versionRegistered
        - policy
        - validatedAt
      properties:
        service:
          type: string
        environment:
          type: string
        version:
          type: string
        recipeId:
          type: string
        deliveryGroupId:
          type: string
        versionRegistered:
          type: boolean
        policy:
          type: object
          required:
            - max_concurrent_deployments
            - current_concurrent_deployments
            - daily_deploy_quota
            - deployments_used
            - deployments_remaining
          properties:
            max_concurrent_deployments:
              type: integer
            current_concurrent_deployments:
              type: integer
            daily_deploy_quota:
              type: integer
            deployments_used:
              type: integer
            deployments_remaining:
              type: integer
        validatedAt:
          type: string
          format: date-time
    PolicySummaryRequest:
      type: object
      required:
        - service
        - environment
      properties:
        service:
          type: string
        environment:
          type: string
        recipeId:
          type: string
          nullable: true
    PolicySummaryResponse:
      type: object
      required:
        - service
        - environment
        - deliveryGroupId
        - policy
        - generatedAt
      properties:
        service:
          type: string
        environment:
          type: string
        recipeId:
          type: string
          nullable: true
        deliveryGroupId:
          type: string
        policy:
          type: object
          required:
            - max_concurrent_deployments
            - current_concurrent_deployments
            - daily_deploy_quota
            - deployments_used
            - deployments_remaining
          properties:
            max_concurrent_deployments:
              type: integer
            current_concurrent_deployments:
              type: integer
            daily_deploy_quota:
              type: integer
            deployments_used:
              type: integer
            deployments_remaining:
              type: integer
        generatedAt:
          type: string
          format: date-time
    DeploymentState:
      type: string
      enum: [PENDING, ACTIVE, IN_PROGRESS, SUCCEEDED, FAILED, CANCELED, ROLLED_BACK]
    DeploymentOutcome:
      type: string
      enum: [SUCCEEDED, FAILED, ROLLED_BACK, CANCELED, SUPERSEDED]
    DeploymentKind:
      type: string
      enum: [ROLL_FORWARD, ROLLBACK]
    EngineType:
      type: string
      enum: [SPINNAKER]
    EnvironmentType:
      type: string
      enum: [non_prod, prod]
    Guardrails:
      type: object
      properties:
        max_concurrent_deployments:
          type: integer
        daily_deploy_quota:
          type: integer
        daily_rollback_quota:
          type: integer
    AdminSystemRateLimits:
      type: object
      required: [read_rpm, mutate_rpm, source]
      properties:
        read_rpm:
          type: integer
          minimum: 1
          maximum: 5000
        mutate_rpm:
          type: integer
          minimum: 1
          maximum: 5000
        source:
          type: string
          enum: [ssm]
    AdminSystemRateLimitsUpdateRequest:
      type: object
      required: [read_rpm, mutate_rpm]
      properties:
        read_rpm:
          type: integer
          minimum: 1
          maximum: 5000
        mutate_rpm:
          type: integer
          minimum: 1
          maximum: 5000
    AdminSystemCiPublishers:
      type: object
      required: [ci_publishers, source]
      properties:
        ci_publishers:
          type: array
          items:
            type: string
            minLength: 1
        source:
          type: string
          enum: [ssm]
    AdminSystemCiPublishersUpdateRequest:
      type: object
      required: [ci_publishers]
      properties:
        ci_publishers:
          type: array
          items:
            type: string
            minLength: 1
    Environment:
      type: object
      required:
        - id
        - name
        - type
        - delivery_group_id
        - is_enabled
      properties:
        id:
          type: string
          description: Internal environment id (storage key).
        name:
          type: string
          description: Canonical environment name used by deploy intent and history filtering.
        display_name:
          type: string
          nullable: true
          description: Optional UI label for the environment.
        type:
          $ref: '#/components/schemas/EnvironmentType'
        promotion_order:
          type: integer
          nullable: true
          minimum: 1
          description: Optional ordering hint for promotion path evaluation within a delivery group.
        delivery_group_id:
          type: string
        is_enabled:
          type: boolean
        guardrails:
          $ref: '#/components/schemas/Guardrails'
    CurrentRunningState:
      type: object
      required:
        - service
        - environment
        - scope
        - version
        - deploymentId
        - deploymentKind
        - derivedAt
      properties:
        service:
          type: string
        environment:
          type: string
        scope:
          type: string
          enum: [service]
        version:
          type: string
        deploymentId:
          type: string
        deploymentKind:
          $ref: '#/components/schemas/DeploymentKind'
        derivedAt:
          type: string
          format: date-time
    DeploymentSummary:
      type: object
      required:
        - id
        - state
        - version
        - recipeId
        - createdAt
        - updatedAt
        - rollbackOf
        - deploymentKind
        - outcome
      properties:
        id:
          type: string
        state:
          $ref: '#/components/schemas/DeploymentState'
        version:
          type: string
        recipeId:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        rollbackOf:
          type: string
          nullable: true
        deploymentKind:
          $ref: '#/components/schemas/DeploymentKind'
        outcome:
          allOf:
            - $ref: '#/components/schemas/DeploymentOutcome'
          nullable: true
        engineExecutionId:
          type: string
          description: Admin-only engine execution identifier.
        engineExecutionUrl:
          type: string
          format: uri
          description: Admin-only engine execution link.
    ServiceDeliveryStatus:
      type: object
      required:
        - service
        - environment
        - hasDeployments
        - latest
        - currentRunning
      properties:
        service:
          type: string
        environment:
          type: string
        hasDeployments:
          type: boolean
        latest:
          allOf:
            - $ref: '#/components/schemas/DeploymentSummary'
          nullable: true
        currentRunning:
          allOf:
            - $ref: '#/components/schemas/CurrentRunningState'
          nullable: true
    NormalizedFailure:
      type: object
      required: [category, summary, observedAt]
      properties:
        category:
          type: string
          enum: [VALIDATION, POLICY, ARTIFACT, INFRASTRUCTURE, CONFIG, APP, TIMEOUT, ROLLBACK, UNKNOWN]
        summary:
          type: string
        detail:
          type: string
        actionHint:
          type: string
        observedAt:
          type: string
          format: date-time
    BuildUploadRequest:
      type: object
      required: [service, version, expectedSizeBytes, expectedSha256, contentType]
      properties:
        service:
          type: string
        version:
          type: string
          pattern: '^[0-9]+\.[0-9]+\.[0-9]+(-[A-Za-z0-9.-]+)?$'
        expectedSizeBytes:
          type: integer
          format: int64
          maximum: 209715200
          description: Max 200MB.
        expectedSha256:
          type: string
          pattern: '^[A-Fa-f0-9]{64}$'
        contentType:
          type: string
          enum: [application/zip, application/gzip]
    BuildUploadCapability:
      type: object
      required: [uploadType, expiresAt, expectedSizeBytes, expectedSha256, expectedContentType]
      properties:
        uploadType:
          type: string
          enum: [SIGNED_URL, TOKEN]
        uploadUrl:
          type: string
          format: uri
        uploadToken:
          type: string
        expiresAt:
          type: string
          format: date-time
        expectedSizeBytes:
          type: integer
          format: int64
        expectedSha256:
          type: string
        expectedContentType:
          type: string
          enum: [application/zip, application/gzip]
    BuildRegistration:
      type: object
      required: [service, version, artifactRef, git_sha, git_branch, ci_provider, ci_run_id, built_at, sha256, sizeBytes, contentType]
      properties:
        service:
          type: string
        version:
          type: string
          pattern: '^[0-9]+\.[0-9]+\.[0-9]+(-[A-Za-z0-9.-]+)?$'
        artifactRef:
          type: string
          format: uri
          pattern: '^[a-z][a-z0-9+.-]*://.+$'
          description: URI with scheme; v1 only allows s3://<bucket>/<key>.
        git_sha:
          type: string
        git_branch:
          type: string
        ci_provider:
          type: string
        ci_run_id:
          type: string
        built_at:
          type: string
          format: date-time
        sha256:
          type: string
          pattern: '^[A-Fa-f0-9]{64}$'
        sizeBytes:
          type: integer
          format: int64
          maximum: 209715200
        contentType:
          type: string
          enum: [application/zip, application/gzip]
        checksum_sha256:
          type: string
        repo:
          type: string
        actor:
          type: string
        registeredAt:
          type: string
          format: date-time
    BuildRegisterExistingRequest:
      type: object
      required: [service, version, artifactRef, git_sha, git_branch, ci_provider, ci_run_id, built_at]
      properties:
        service:
          type: string
        version:
          type: string
          pattern: '^[0-9]+\.[0-9]+\.[0-9]+(-[A-Za-z0-9.-]+)?$'
        artifactRef:
          type: string
          format: uri
          pattern: '^[a-z][a-z0-9+.-]*://.+$'
          description: URI with scheme; v1 only allows s3://<bucket>/<key>.
        git_sha:
          type: string
        git_branch:
          type: string
        ci_provider:
          type: string
        ci_run_id:
          type: string
        built_at:
          type: string
          format: date-time
        checksum_sha256:
          type: string
          nullable: true
        repo:
          type: string
          nullable: true
        actor:
          type: string
          nullable: true
        s3Bucket:
          type: string
          nullable: true
        s3Key:
          type: string
          nullable: true
    Recipe:
      type: object
      required: [id, name, recipe_revision, effective_behavior_summary, status, engine_type]
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        engine_type:
          $ref: '#/components/schemas/EngineType'
        spinnaker_application:
          type: string
          description: Admin-only engine mapping.
        deploy_pipeline:
          type: string
          description: Admin-only engine mapping.
        rollback_pipeline:
          type: string
          description: Admin-only engine mapping.
        recipe_revision:
          type: integer
          description: Monotonic recipe revision.
        effective_behavior_summary:
          type: string
          description: Short, user-facing description of effective behavior.
        status:
          type: string
          enum: [active, deprecated]
        created_at:
          type: string
          format: date-time
        created_by:
          type: string
        updated_at:
          type: string
          format: date-time
        updated_by:
          type: string
        last_change_reason:
          type: string
    RecipeUpsert:
      type: object
      required: [id, name, spinnaker_application, deploy_pipeline, effective_behavior_summary]
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        spinnaker_application:
          type: string
        deploy_pipeline:
          type: string
        rollback_pipeline:
          type: string
        effective_behavior_summary:
          type: string
        status:
          type: string
          enum: [active, deprecated]
        change_reason:
          type: string
    Error:
      type: object
      required: [code, error_code, failure_cause, message, request_id]
      properties:
        code:
          type: string
        error_code:
          type: string
        failure_cause:
          type: string
          enum: [USER_ERROR, POLICY_CHANGE, UNKNOWN]
        message:
          type: string
        request_id:
          type: string
        operator_hint:
          type: string
        details:
          type: object

  responses:
    BadRequest:
      description: Invalid request or policy violation.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: Resource not found.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    ServiceNotAllowlisted:
      description: Service is not allowlisted.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Forbidden:
      description: Caller is not authorized (for build registration, code CI_ONLY means only configured CI publishers may call).
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    DeploymentLocked:
      description: Delivery group concurrency limit reached.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Conflict:
      description: Registration conflict with an existing immutable resource.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    RateLimited:
      description: Rate limit or quota exceeded.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    MutationsDisabled:
      description: Mutating operations are disabled by kill switch.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotImplemented:
      description: Endpoint exists but is not implemented yet.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
