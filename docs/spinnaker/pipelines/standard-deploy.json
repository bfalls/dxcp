{
  "application": "demo-service",
  "name": "dxcp-standard-deploy",
  "description": "DXCP Standard deploy (single-pass) via runtime-controller webhook",
  "keepWaitingPipelines": false,
  "limitConcurrent": true,
  "parameterConfig": [
    {
      "name": "service",
      "required": true
    },
    {
      "name": "version",
      "required": true
    },
    {
      "name": "artifactRef",
      "required": true
    },
    {
      "name": "engineUrl",
      "required": true
    },
    {
      "name": "engineToken",
      "required": true
    },
    {
      "name": "s3Bucket",
      "required": false
    },
    {
      "name": "s3Key",
      "required": false
    }
  ],
  "stages": [
    {
      "type": "webhook",
      "name": "deploy-artifact",
      "refId": "1",
      "requisiteStageRefIds": [],
      "method": "POST",
      "url": "${parameters.engineUrl}deploy",
      "customHeaders": {
        "X-DXCP-Controller-Token": "${parameters.engineToken}"
      },
      "payload": {
        "service": "${parameters.service}",
        "version": "${parameters.version}",
        "artifactRef": "${parameters.artifactRef}",
        "s3Bucket": "${parameters.s3Bucket}",
        "s3Key": "${parameters.s3Key}"
      }
    }
  ]
}
